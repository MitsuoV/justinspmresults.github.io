<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Justin's SPM Results</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@700&display=swap" rel="stylesheet">
    <style>
        .checkout-page {
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .checkout-page.show {
            opacity: 1;
            visibility: visible;
        }

        .main-content {
            opacity: 1;
            transition: opacity 0.5s ease;
        }

        .main-content.fade-out {
            opacity: 0;
            pointer-events: none;
        }


        /* Floating Cart Button for Mobile */
        .cart-float-btn {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 50%;
            width: 50px; /* Smaller button */
            height: 50px; /* Smaller button */
            font-size: 1.2rem; /* Smaller font */
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        /* Slide Up Cart Panel */
        .cart-box.mobile-slide {
            position: fixed;
            bottom: -100%;
            left: 0;
            width: 100%;
            z-index: 999;
            transition: bottom 0.4s ease-in-out;
            border-radius: 20px 20px 0 0;
            padding: 1rem; /* Less padding for mobile */
        }

        /* When Active */
        .cart-box.mobile-slide.active {
            bottom: 0;
        }

        /* Show floating button only on small screens */
        @media (max-width: 768px) {
            body {
        overflow-x: hidden; /* Prevent horizontal scroll on the body */
    }

    .container {
        padding: 1rem;
        max-width: 100%; /* Ensure it takes full width */
        box-sizing: border-box; /* Include padding and border in the element's total width and height */
    }

    .price-list,
    .cart-box,
    .checkout-page {
        box-sizing: border-box; /* Ensure padding doesn't add to the width */
        width: 100%; /* Make them take full width */
    }

    .subject-item {
        flex-direction: column;
        align-items: flex-start;
        box-sizing: border-box; /* Important for padding */
        width: 100%; /* Ensure full width */
    }

    .qr-code {
        max-width: 90%; /* Ensure QR code doesn't overflow */
        height: auto;
    }
            .cart-float-btn {
                display: block;
            }

            .cart-box.desktop {
                display: none;
            }

            .cart-box.mobile-slide {
                display: block;
            }

            .container {
        padding: 1rem; /* Keep the padding */
        max-width: 100%; /* Ensure it takes full width on mobile */
    }
            .header {
                margin-bottom: 1.5rem; /* Less header margin */
                padding: 1rem; /* Less header padding */
            }

            h1 {
                font-size: 2rem; /* Smaller heading */
            }

            .main-content {
                grid-template-columns: 1fr; /* Stack elements */
                gap: 1rem; /* Smaller gap */
            }

            .price-list,
            .cart-box {
                padding: 1rem; /* Less padding */
            }

            .subject-item {
                padding: 0.75rem 0; /* Less vertical padding */
                flex-direction: column; /* Stack subject info */
                align-items: flex-start; /* Align left */
            }

            .subject-item > div {
                margin: 0.25rem 0; /* Smaller margins for stacked items */
            }

            .quantity-input {
                width: 50px; /* Smaller input */
                padding: 0.3rem; /* Smaller padding */
                font-size: 0.9rem; /* Smaller font */
            }

            button {
                padding: 0.6rem 1rem; /* Smaller button padding */
                font-size: 0.9rem; /* Smaller font */
                margin-top: 0.25rem; /* Smaller top margin */
            }

            .cart-box h2 {
                font-size: 1.5rem; /* Smaller cart heading */
            }

            .cart-box p {
                font-size: 1rem; /* Smaller cart total */
            }

            #cart-items > div {
                font-size: 0.9rem; /* Smaller cart items font */
                margin: 0.25rem 0; /* Smaller margin for cart items */
            }

            .checkout-page {
                padding: 1.5rem; /* Less checkout padding */
            }

            .checkout-page h2 {
                font-size: 1.8rem; /* Smaller checkout heading */
            }

            .checkout-page div {
                font-size: 1.2rem; /* Smaller total amount */
                margin: 1rem 0; /* Smaller margin */
            }

            .qr-code {
                max-width: 200px; /* Smaller QR code */
                margin: 1rem auto; /* Smaller margin */
            }

            .checkout-page p {
                font-size: 0.85rem; /* Smaller text */
            }
        }

        :root {
            --primary: #3D52A0;
            --secondary: #7091E6;
            --accent: #8697C4;
            --light: #ADBBDA;
            --background: #EDE8F5;
        }

        body {
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            margin: 0;
            background: linear-gradient(45deg, var(--primary), var(--secondary), var(--light));
            color: #2c3e50;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        .header {
            text-align: center;
            margin-bottom: 3rem;
            padding: 2rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
        }

        h1 {
            font-family: 'Poppins', sans-serif;
            color: var(--primary);
            font-size: 2.8rem;
            margin: 0;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        .price-list {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
        }

        .subject-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--light);
        }

        .cart-box {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            height: fit-content;
        }

        .checkout-page {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 3rem;
            text-align: center;
        }

        .qr-code {
            width: 300px;
            margin: 2rem auto;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        button {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(61,82,160,0.3);
            background: linear-gradient(135deg, var(--secondary), var(--primary));
        }

        .quantity-input {
            width: 60px;
            padding: 0.5rem;
            border: 2px solid var(--light);
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Justin's SPM Results</h1>
            <p>I heard you are curious for my SPM results, please refer to the following price list in order to know more</p>
        </div>

        <div class="main-content">
            <div class="price-list" id="price-list">
                <h2>Available Subjects</h2>
                </div>

            <div class="cart-box">
                <h2>Your Cart ðŸ›’</h2>
                <div id="cart-items" style="margin: 1rem 0;"></div>
                <hr>
                <p style="font-size: 1.2rem;">Total: RM <span id="total-amount">0.00</span></p>
                <button onclick="showCheckout()">Checkout Now</button>
            </div>
        </div>

        <div class="checkout-page" id="checkout-page">
            <h2>Payment Confirmation</h2>
            <div style="font-size: 2rem; margin: 2rem 0;">
                Total Amount: RM <span id="checkout-total">0.00</span>
            </div>
            <img src="1744875985085_100.JPG" alt="DuitNow QR Code" class="qr-code">
            <p style="color: var(--accent);">Scan using your preferred banking app or eWallet</p>
            <button onclick="returnToSubjects()">Return to Subjects</button>
        </div>
    </div>

    <script>
    function toggleMobileCart() {
        const cartBox = document.querySelector('.cart-box');
        if (cartBox) {
            cartBox.scrollIntoView({ behavior: 'smooth' });
        }
    }

    const subjects = [
        { name: "Bahasa Malaysia (BM)", code: "BM", difficultyText: "abit hard", difficultyValue: 4 },
        { name: "Bahasa Inggeris (BI)", code: "BI", difficultyText: "close both eyes also can do", difficultyValue: 1 },
        { name: "Bahasa Cina (BC)", code: "BC", difficultyText: "abit hard", difficultyValue: 4 },
        { name: "Mathematics", code: "MATH", difficultyText: "normal", difficultyValue: 3 },
        { name: "Additional Mathematics", code: "ADDMATH", difficultyText: "memang jibai", difficultyValue: 5 },
        { name: "Sejarah", code: "SEJ", difficultyText: "normal", difficultyValue: 3 },
        { name: "Physics", code: "PHY", difficultyText: "normal", difficultyValue: 3 },
        { name: "Biology", code: "BIO", difficultyText: "memang jibai", difficultyValue: 5 },
        { name: "Chemistry", code: "CHEM", difficultyText: "normal", difficultyValue: 3 },
        { name: "Moral", code: "MORAL", difficultyText: "normal", difficultyValue: 3 }
    ];
    let cart = [];
    const FIXED_PRICE = 49.99;

    // Create price list
    function createPriceList() {
        const container = document.getElementById('price-list');
        let html = '';
        const maxDifficulty = 5;
        const barWidth = 80;

        function renderBar(difficulty) {
            const maxDifficulty = 5;
            const percentage = (difficulty / maxDifficulty) * 100;
            const barWidth = 80;
            const barWidthPx = barWidth * (difficulty / maxDifficulty);

            let backgroundColor = '';
            if (difficulty === 1) {
                backgroundColor = 'lightgreen';
            } else if (difficulty === 2) {
                const greenComponent = 255 - Math.round((percentage - 20) * (255 / 20));
                backgroundColor = `rgb(${greenComponent}, 255, 0)`;
            } else if (difficulty === 3) {
                backgroundColor = 'yellow';
            } else if (difficulty === 4) {
                const greenComponent = 255 - Math.round((percentage - 60) * (255 / 40));
                backgroundColor = `rgb(255, ${greenComponent}, 0)`;
            } else if (difficulty === 5) {
                backgroundColor = 'red'; // Explicitly set to red
            }

            const barStyle = `
                display: inline-block;
                background-color: ${backgroundColor};
                height: 10px;
                width: ${barWidthPx}px;
                border-radius: 5px;
                margin-right: 5px;
            `;
            return `<span style="${barStyle}"></span>`;
        }

        subjects.forEach(subject => {
            html += `
                <div class="subject-item">
                    <div>
                        <strong>${subject.name}</strong><br>
                        <small>${subject.code}</small><br>
                        <small style="color: var(--accent);">Difficulty: ${subject.difficultyText} <br> ${renderBar(subject.difficultyValue)}</small>
                    </div>
                    <div>
                        RM ${FIXED_PRICE}<br>
                        <input type="number" class="quantity-input"
                                id="qty-${subject.code}"
                                min="1" value="1">
                        <button onclick="addToCart('${subject.code}')">
                            Add to Cart
                        </button>
                    </div>
                </div>
            `;
        });

        container.innerHTML += html;
    }

    // Cart functions
    function addToCart(code) {
        const quantity = parseInt(document.getElementById(`qty-${code}`).value);
        const existing = cart.find(item => item.code === code);

        if (existing) {
            existing.quantity += quantity;
        } else {
            cart.push({
                code: code,
                name: subjects.find(s => s.code === code).name,
                price: FIXED_PRICE,
                quantity: quantity
            });
        }

        updateCartDisplay();
    }

    function updateCartDisplay() {
        const cartContainer = document.getElementById('cart-items');
        let html = '';
        let total = 0;

        cart.forEach(item => {
            const subtotal = item.price * item.quantity;
            total += subtotal;
            html += `
                <div style="margin: 0.5rem 0;">
                    ${item.name} (${item.quantity}x)&nbsp;
                    <strong>RM ${subtotal.toFixed(2)}</strong>
                </div>
            `;
        });

        cartContainer.innerHTML = html;
        document.getElementById('total-amount').textContent = total.toFixed(2);
    }

    function showCheckout() {
        if (cart.length === 0) {
            alert('Please add subjects to your cart first!');
            return;
        }

        const mainContent = document.querySelector('.main-content');
        const checkoutPage = document.getElementById('checkout-page');

        // Fade out the subject list
        mainContent.classList.add('fade-out');

        // Wait for the fade-out to finish before switching views
        setTimeout(() => {
            mainContent.style.display = 'none';
            checkoutPage.style.display = 'block';

            // Add fade-in transition for checkout page
            requestAnimationFrame(() => {
                checkoutPage.classList.add('show');
            });

            // Set total in checkout
            document.getElementById('checkout-total').textContent =
                document.getElementById('total-amount').textContent;
        }, 500); // 500ms matches the CSS transition
    }

    function returnToSubjects() {
        const mainContent = document.querySelector('.main-content');
        const checkoutPage = document.getElementById('checkout-page');

        // Fade out checkout page
        checkoutPage.classList.remove('show');

        // After fade out, bring back main content
        setTimeout(() => {
            checkoutPage.style.display = 'none';
            mainContent.style.display = 'grid';
            requestAnimationFrame(() => {
                mainContent.classList.remove('fade-out');
                mainContent.classList.add('show');
            });
        }, 500);
    }

    // Initialize the page
    createPriceList();
</script>
    <button class="cart-float-
